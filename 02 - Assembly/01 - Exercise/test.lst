     1                                  
     2                                  extern printf
     3                                  
     4                                  SECTION .data		
     5 00000000 05000000                        a:	dd	5
     6 00000004 613D25642C20656178-             fmt:    db      "a=%d, eax=%d", 33, 10, 10, 0
     7 0000000D 3D2564210A0A00     
     8 00000014 48692D256421210A00              str:	db      "Hi-%d", 33, 0x21, 10, 0
     9                                          str_len equ $-str
    10                                  
    11                                  
    12                                  SECTION .bss			; Section containing uninitialized data
    13                                  
    14                                  	BUFFLEN	equ 1024	; Length of buffer
    15 00000000 <res 00000400>          	Buff: 	resb BUFFLEN	; Text buffer itself
    16                                  	
    17                                  
    18                                  SECTION .text
    19                                  
    20                                      global main		; the standard gcc entry point
    21                                      main:
    22 00000000 55                                  push    ebp		; set up stack frame
    23 00000001 89E5                                mov     ebp,esp
    24                                  
    25 00000003 A1[00000000]                        mov	    eax, [a]	; put a from store into register
    26 00000008 0521000000                          add	    eax, 33	; a+33
    27 0000000D 50                                  push    eax		; push onto stack
    28 0000000E FF35[00000000]                      push    dword [a]	; value of variable a
    29 00000014 68[04000000]                        push    dword fmt	; address of ctrl string
    30 00000019 E8(00000000)                        call    printf	; Call C function
    31 0000001E 81C40C000000                        add     esp, 12	; pop stack
    32                                  
    33 00000024 6809000000                          push    dword str_len
    34 00000029 68[14000000]                        push    dword str
    35 0000002E E8(00000000)                        call    printf	; Call C function
    36 00000033 81C408000000                        add     esp, 8	; pop stack
    37                                  
    38                                  
    39 00000039 89EC                                mov     esp, ebp	; takedown stack frame
    40 0000003B 5D                                  pop     ebp		; same as "leave" op
    41                                  
    42 0000003C B800000000                          mov	    eax,0	;  normal, no error, return value
    43 00000041 C3                                  ret			; return
    44                                  
    45                                  	
